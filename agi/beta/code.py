# agi

```json
{
    "files": [
        {
            "filename": "README.md",
            "content": "# AGI 项目\n\n一个基于 OpenAI API 的通用人工智能实现。\n\n## 功能特性\n\n- 使用 GPT 模型进行自然语言理解和生成\n- 支持上下文记忆和对话管理\n- 可扩展的工具和插件系统\n- 简单的命令行交互界面\n\n## 安装\n\n1. 克隆仓库\n2. 安装依赖：`pip install -r requirements.txt`\n3. 设置环境变量：`export OPENAI_API_KEY=your_api_key`\n\n## 使用方法\n\n运行 `python agi.py` 启动交互式对话。\n"
        },
        {
            "filename": "requirements.txt",
            "content": "openai>=1.0.0\npython-dotenv>=1.0.0\ncolorama>=0.4.6\n"
        },
        {
            "filename": "agi.py",
            "content": "#!/usr/bin/env python3\n\"\"\"\nAGI 主程序\n实现基于 OpenAI API 的通用人工智能对话系统\n\"\"\"\n\nimport os\nimport sys\nfrom typing import List, Dict, Any\nfrom colorama import init, Fore, Style\nfrom dotenv import load_dotenv\n\n# 加载环境变量\nload_dotenv()\n\n# 初始化 colorama 用于彩色输出\ninit(autoreset=True)\n\n# 导入 OpenAI\nfrom openai import OpenAI\n\n\nclass AGISystem:\n    \"\"\"AGI 核心系统类\"\"\"\n    \n    def __init__(self, model: str = \"gpt-4o\"):\n        \"\"\"初始化 AGI 系统\"\"\"\n        api_key = os.getenv(\"OPENAI_API_KEY\")\n        if not api_key:\n            print(Fore.RED + \"错误: 未找到 OPENAI_API_KEY 环境变量\")\n            print(\"请在 .env 文件中设置 OPENAI_API_KEY 或使用环境变量\")\n            sys.exit(1)\n            \n        self.client = OpenAI(api_key=api_key)\n        self.model = model\n        self.conversation_history: List[Dict[str, str]] = []\n        self.max_history_length = 20  # 最大对话历史长度\n        \n    def add_to_history(self, role: str, content: str):\n        \"\"\"添加消息到对话历史\"\"\"\n        self.conversation_history.append({\n            \"role\": role,\n            \"content\": content\n        })\n        \n        # 限制历史记录长度\n        if len(self.conversation_history) > self.max_history_length:\n            # 保留系统提示词和最近的对话\n            system_message = None\n            if self.conversation_history[0][\"role\"] == \"system\":\n                system_message = self.conversation_history[0]\n                self.conversation_history = self.conversation_history[-self.max_history_length + 1:]\n                self.conversation_history.insert(0, system_message)\n            else:\n                self.conversation_history = self.conversation_history[-self.max_history_length:]\n    \n    def get_response(self, user_input: str) -> str:\n        \"\"\"获取 AI 响应\"\"\"\n        # 添加用户消息到历史\n        self.add_to_history(\"user\", user_input)\n        \n        try:\n            response = self.client.chat.completions.create(\n                model=self.model,\n                messages=self.conversation_history,\n                temperature=0.7,\n                max_tokens=1000\n            )\n            \n            ai_response = response.choices[0].message.content\n            \n            # 添加 AI 响应到历史\n            self.add_to_history(\"assistant\", ai_response)\n            \n            return ai_response\n            \n        except Exception as e:\n            error_msg = f\"调用 OpenAI API 时出错: {str(e)}\"\n            print(Fore.RED + error_msg)\n            return \"抱歉，我遇到了一个错误。请检查网络连接和 API 密钥。\"\n    \n    def reset_conversation(self):\n        \"\"\"重置对话历史\"\"\"\n        # 保留系统提示词\n        system_prompt = self.get_system_prompt()\n        self.conversation_history = [{\"role\": \"system\", \"content\": system_prompt}]\n    \n    def get_system_prompt(self) -> str:\n        \"\"\"获取系统提示词\"\"\"\n        return \"\"\"你是一个通用人工智能（AGI）助手。你的目标是帮助用户解决各种问题，\n        提供准确、有用的信息，并进行有深度的对话。你具有广泛的知识和推理能力。\n        请始终以友好、专业、有帮助的方式回应用户。\"\"\"\n    \n    def start_interactive_mode(self):\n        \"\"\"启动交互式对话模式\"\"\"\n        print(Fore.CYAN + \"=\" * 60)\n        print(Fore.GREEN + \"AGI 系统已启动\")\n        print(Fore.YELLOW + \"模型:\", self.model)\n        print(Fore.CYAN + \"=\" * 60)\n        print(\"输入 'quit', 'exit', 或 'bye' 退出对话\")\n        print(\"输入 'reset' 重置对话历史\")\n        print(Fore.CYAN + \"=\" * 60)\n        print()\n        \n        # 初始化对话历史\n        self.reset_conversation()\n        \n        while True:\n            try:\n                # 获取用户输入\n                user_input = input(Fore.BLUE + \"\\n你: \" + Style.RESET_ALL)\n                \n                # 检查退出命令\n                if user_input.lower() in ['quit', 'exit', 'bye', '再见']:\n                    print(Fore.GREEN + \"\\n再见！感谢使用 AGI 系统。\")\n                    break\n                \n                # 检查重置命令\n                if user_input.lower() == 'reset':\n                    self.reset_conversation()\n                    print(Fore.YELLOW + \"\\n对话历史已重置。\")\n                    continue\n                \n                # 获取并显示 AI 响应\n                print(Fore.MAGENTA + \"\\nAGI: \", end=\"\")\n                response = self.get_response(user_input)\n                print(Fore.WHITE + response)\n                \n            except KeyboardInterrupt:\n                print(Fore.YELLOW + \"\\n\\n检测到中断，正在退出...\")\n                break\n            except EOFError:\n                print(Fore.YELLOW + \"\\n\\n检测到文件结束，正在退出...\")\n                break\n            except Exception as e:\n                print(Fore.RED + f\"\\n错误: {str(e)}\")\n\n\ndef main():\n    \"\"\"主函数\"\"\"\n    try:\n        # 创建 AGI 系统实例\n        agi = AGISystem()\n        \n        # 启动交互模式\n        agi.start_interactive_mode()\n        \n    except KeyboardInterrupt:\n        print(Fore.YELLOW + \"\\n程序被用户中断\")\n        sys.exit(0)\n    except Exception as e:\n        print(Fore.RED + f\"程序运行出错: {str(e)}\")\n        sys.exit(1)\n\n\nif __name__ == \"__main__\":\n    main()\n"
        },
        {
            "filename": "config.py",
            "content": "\"\"\"\nAGI 配置模块\n\"\"\"\n\nimport os\nfrom typing import Dict, Any\nfrom dataclasses import dataclass\nfrom dotenv import load_dotenv\n\n# 加载环境变量\nload_dotenv()\n\n\n@dataclass\nclass AGIConfig:\n    \"\"\"AGI 配置类\"\"\"\n    \n    # OpenAI 配置\n    openai_api_key: str = os.getenv(\"OPENAI_API_KEY\", \"\")\n    default_model: str = \"gpt-4o\"\n    temperature: float = 0.7\n    max_tokens: int = 1000\n    \n    # 系统配置\n    max_history_length: int = 20\n    enable_color_output: bool = True\n    \n    # 对话配置\n    system_prompt: str = \"\"\"你是一个通用人工智能（AGI）助手。你的目标是帮助用户解决各种问题，\n    提供准确、有用的信息，并进行有深度的对话。你具有广泛的知识和推理能力。\n    请始终以友好、专业、有帮助的方式回应用户。\"\"\"\n    \n    @classmethod\n    def from_dict(cls, config_dict: Dict[str, Any]) -> \"AGIConfig\":\n        \"\"\"从字典创建配置实例\"\"\"\n        return cls(**config_dict)\n    \n    def to_dict(self) -> Dict[str, Any]:\n        \"\"\"将配置转换为字典\"\"\"\n        return {\n            \"default_model\": self.default_model,\n            \"temperature\": self.temperature,\n            \"max_tokens\": self.max_tokens,\n            \"max_history_length\": self.max_history_length,\n            \"enable_color_output\": self.enable_color_output,\n        }\n\n\ndef load_config() -> AGIConfig:\n    \"\"\"加载配置\"\"\"\n    return AGIConfig()\n"
        },
        {
            "filename": "utils.py",
            "content": "\"\"\"\nAGI 工具函数模块\n\"\"\"\n\nimport json\nimport time\nfrom typing import Any, Dict, List\nfrom colorama import Fore, Style\n\n\ndef format_timestamp() -> str:\n    \"\"\"格式化当前时间戳\"\"\"\n    return time.strftime(\"%Y-%m-%d %H:%M:%S\", time.localtime())\n\n\ndef save_conversation(history: List[Dict[str, str]], filename: str = None):\n    \"\"\"保存对话历史到文件\"\"\"\n    if filename is None:\n        timestamp = time.strftime(\"%Y%m%d_%H%M%S\")\n        filename = f\"conversation_{timestamp}.json\"\n    \n    try:\n        with open(filename, 'w', encoding='utf-8') as f:\n            json.dump({\n                \"timestamp\": format_timestamp(),\n                \"history\": history\n            }, f, ensure_ascii=False, indent=2)\n        print(Fore.GREEN + f\"对话已保存到: {filename}\")\n    except Exception as e:\n        print(Fore.RED + f\"保存对话失败: {str(e)}\")\n\n\ndef load_conversation(filename: str) -> List[Dict[str, str]]:\n    \"\"\"从文件加载对话历史\"\"\"\n    try:\n        with open(filename, 'r', encoding='utf-8') as f:\n            data = json.load(f)\n        return data.get(\"history\", [])\n    except Exception as e:\n        print(Fore.RED + f\"加载对话失败: {str(e)}\")\n        return []\n\n\def print_colored(text: str, color: str = Fore.WHITE, bold: bool = False):\n    \"\"\"打印彩色文本\"\"\"\n    style = Style.BRIGHT if bold else Style.NORMAL\n    print(f\"{style}{color}{text}{Style.RESET_ALL}\")\n\n\ndef estimate_tokens(text: str) -> int:\n    \"\"\"粗略估计文本的 token 数量\"\"\"\n    # 简单估算：英文单词数 + 标点符号\n    # 实际应该使用 tiktoken 库，这里简化处理\n    return len(text.split()) + text.count(' ') // 2\n\n\ndef validate_api_key(api_key: str) -> bool:\n    \"\"\"验证 API 密钥格式\"\"\"\n    if not api_key:\n        return False\n    # OpenAI API 密钥通常以 'sk-' 开头\n    return api_key.startswith('sk-')\n"
        },
        {
            "filename": "setup.py",
            "content": "from setuptools import setup, find_packages\n\nwith open(\"README.md\", \"r\", encoding=\"utf-8\") as fh:\n    long_description = fh.read()\n\nsetup(\n    name=\"agi-system\",\n    version=\"0.1.0\",\n    author=\"AGI Project Team\",\n    author_email=\"example@example.com\",\n    description=\"A General Artificial Intelligence system using OpenAI API\",\n    long_description=long_description,\n    long_description_content_type=\"text/markdown\",\n    url=\"https://github.com/yourusername/agi\",\n    packages=find_packages(),\n    classifiers=[\n        \"Programming Language :: Python :: 3\",\n        \"License :: OSI Approved :: MIT License\",\n        \"Operating System :: OS Independent\",\n    ],\n    python_requires=\">=3.8\",\n    install_requires=[\n        \"openai>=1.0.0\",\n        \"python-dotenv>=1.0.0\",\n        \"colorama>=0.4.6\",\n    ],\n    entry_points={\n        \"console_scripts\": [\n            \"agi=agi:main\",\n        ],\n    },\n)\n"
        },
        {
            "filename": ".env.example",
            "content": "# OpenAI API 配置\nOPENAI_API_KEY=your_openai_api_key_here\n\n# 可选配置\n# DEFAULT_MODEL=gpt-4o\n# MAX_HISTORY_LENGTH=20\n"
        }
    ]
}
```