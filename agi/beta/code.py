# agi

```json
{
    "files": [
        {
            "filename": "agi_engine.py",
            "content": "import openai\nimport json\nimport time\nfrom typing import Dict, Any, Optional\n\n# 配置OpenAI API密钥（请在环境变量中设置）\nopenai.api_key = \"YOUR_OPENAI_API_KEY\"\n\nclass AGIEngine:\n    \"\"\"一个基础的AGI引擎，基于OpenAI API实现核心推理和决策能力\"\"\"\n\n    def __init__(self, model_name: str = \"gpt-4\", max_retries: int = 3):\n        \"\"\"初始化AGI引擎。\n\n        Args:\n            model_name (str): 使用的OpenAI模型名称，默认为gpt-4\n            max_retries (int): API调用失败时的最大重试次数\"\"\"\n        self.model_name = model_name\n        self.max_retries = max_retries\n\n    def generate_response(self, prompt: str, temperature: float = 0.7, max_tokens: int = 1024) -> Dict[str, Any]:\n        \"\"\"生成基于提示的响应。\n\n        Args:\n            prompt (str): 输入提示文本\n            temperature (float): 控制输出随机性的参数，值越高越随机（0-2之间）\n            max_tokens (int): 最大生成令牌数\n\n        Returns:\n            Dict[str, Any]: 包含生成结果和元数据的字典\"\"\"\n        retries = 0\n        while retries < self.max_retries:\n            try:\n                response = openai.ChatCompletion.create(\n                    model=self.model_name,\n                    messages=[{\"role\": \"user\", \"content\": prompt}],\n                    temperature=temperature,\n                    max_tokens=max_tokens,\n                    top_p=1.0,\n                    frequency_penalty=0.0,\n                    presence_penalty=0.0\n                )\n                # 提取回复内容\n                message = response.choices[0].message.content.strip()\n                return {\n                    \"success\": True,\n                    \"response\": message,\n                    \"model\": response.model,\n                    \"usage\": response.usage.dict(),\n                    \"timestamp\": time.time()\n                }\n            except Exception as e:\n                retries += 1\n                print(f\"API调用失败，第{retries}次重试：{e}\")\n                if retries >= self.max_retries:\n                    return {\n                        \"success\": False,\n                        \"error\": str(e),\n                        \"retry_count\": self.max_retries\n                    }\n                time.sleep(2 ** retries)  # 指数退避\n\n    def think(self, task: str, context: Optional[str] = None) -> Dict[str, Any]:\n        \"\"\"模拟高级认知过程：思考、规划、推理。\n\n        Args:\n            task (str): 要完成的任务描述\n            context (str, optional): 上下文信息，用于增强推理准确性\n\n        Returns:\n            Dict[str, Any]: 思考结果和分析过程\"\"\"\n        # 构建思考提示\n        full_prompt = f\"\"\"\n你是一个具备通用人工智能能力的系统。请对以下任务进行深入分析与思考：\n\n任务：{task}\n\n{'上下文：' + context if context else '无上下文'}\n\n请按以下步骤思考并输出：\n1. 理解任务目标；\n2. 分析所需知识与资源；\n3. 制定解决策略；\n4. 输出最终结论或行动建议。\n\n请以结构化格式回答，确保逻辑清晰、推理严密。\n\"\"\"\n\n        return self.generate_response(full_prompt, temperature=0.5, max_tokens=1500)\n\n    def learn_from_experience(self, experience: str, reflection: str) -> Dict[str, Any]:\n        \"\"\"通过经验反思实现自我改进。\n\n        Args:\n            experience (str): 过去的经验描述\n            reflection (str): 对该经验的反思与总结\n\n        Returns:\n            Dict[str, Any]: 改进后的学习成果\"\"\"\n        prompt = f\"\"\"\n你是一个正在学习的AGI系统。根据以下经验与反思，请总结出可复用的知识点或改进策略：\n\n经验：{experience}\n\n反思：{reflection}\n\n请输出一条简洁的学习摘要，可用于未来类似情境的优化决策。\n\"\"\"\n\n        return self.generate_response(prompt, temperature=0.3, max_tokens=512)\n\n    def run(self, input_task: str, context: Optional[str] = None) -> Dict[str, Any]:\n        \"\"\"运行整个AGI流程：思考 → 决策 → 执行反馈。\n\n        Args:\n            input_task (str): 用户输入的任务请求\n            context (str, optional): 可选的上下文信息\n\n        Returns:\n            Dict[str, Any]: 完整的处理结果\"\"\"\n        print(f\"开始处理任务：{input_task}\")\n        \n        # 第一步：深度思考任务\n        thinking_result = self.think(input_task, context)\n        if not thinking_result[\"success\"]:\n            return thinking_result\n\n        # 第二步：生成最终输出（可扩展为执行动作）\n        final_output = thinking_result[\"response\"]\n        print(f\"思考结果：{final_output}\")\n        \n        return {\n            \"task\": input_task,\n            \"context\": context,\n            \"thought_process\": thinking_result,\n            \"final_output\": final_output,\n            \"status\": \"completed\"\n        }\n\n# 示例使用方式（仅供测试）\nif __name__ == \"__main__\":\n    agi = AGIEngine(model_name=\"gpt-4\")\n    \n    # 测试任务：设计一个简单的智能家居控制系统\n    task = \"设计一个能够根据用户习惯自动调节温度、灯光和音乐的智能家居系统。要求考虑隐私保护和能源效率。\"\n    context = \"用户是上班族，每天工作日早上8点出门，晚上6点回家。\"\n    \n    result = agi.run(task, context)\n    print(json.dumps(result, indent=2, ensure_ascii=False))\n"
        },
        {
            "filename": "config.py",
            "content": "import os\n\n# OpenAI API配置\nOPENAI_API_KEY = os.getenv(\"OPENAI_API_KEY\")\nif not OPENAI_API_KEY:\n    raise EnvironmentError(\"请设置环境变量 OPENAI_API_KEY\")\n\n# 默认模型配置\nDEFAULT_MODEL = \"gpt-4\"\nMAX_RETRIES = 3\nTEMPERATURE = 0.7\nMAX_TOKENS = 1024\n\n# 日志配置\nLOG_LEVEL = \"INFO\"\nLOG_FILE = \"agi.log\"\n\n# 系统行为参数（可后续调整）\nSELF_REFLECTION_ENABLED = True\nMEMORY_WINDOW_SIZE = 10  # 保留最近10条经验用于记忆"
        },
        {
            "filename": "requirements.txt",
            "content": "openai==1.10.0\npython-dotenv==1.0.0\nrequests==2.31.0\n"
        },
        {
            "filename": ".env.example",
            "content": "# 请将此文件重命名为 .env 并填写你的OpenAI API密钥\nOPENAI_API_KEY=sk-your-openai-api-key-here"
        }
    ]
}
```