# agi

{
    "files": [
        {
            "filename": "agi/core/agent.py",
            "content": "import os\nimport logging\nfrom typing import List, Dict, Any, Optional\nfrom openai import OpenAI\n\nlogger = logging.getLogger(__name__)\n\nclass AGIAgent:\n    \"\"\"\n    核心AGI代理类，负责与OpenAI API交互并管理对话状态。\n    实现基础的推理、记忆和工具调用能力。\n    \"\"\"\n    \n    def __init__(\n        self,\n        model: str = \"gpt-4-turbo\",\n        api_key: Optional[str] = None,\n        system_prompt: Optional[str] = None\n    ):\n        \"\"\"\n        初始化AGI代理\n        \n        Args:\n            model: 使用的OpenAI模型名称\n            api_key: OpenAI API密钥，如果未提供则从环境变量OPENAI_API_KEY读取\n            system_prompt: 系统提示词，定义代理的行为准则\n        \"\"\"\n        self.model = model\n        self.api_key = api_key or os.getenv(\"OPENAI_API_KEY\")\n        if not self.api_key:\n            raise ValueError(\"OpenAI API key must be provided either as argument or in OPENAI_API_KEY environment variable\")\n        \n        self.client = OpenAI(api_key=self.api_key)\n        self.system_prompt = system_prompt or (\n            \"You are an Artificial General Intelligence (AGI) assistant. \"\n            \"Your goal is to reason step by step, learn from interactions, and provide helpful, truthful responses. \"\n            \"Think carefully before responding.\"\n        )\n        self.conversation_history: List[Dict[str, Any]] = []\n        \n        # 初始化对话历史\n        self._add_message(\"system\", self.system_prompt)\n    \n    def _add_message(self, role: str, content: str) -> None:\n        \"\"\"向对话历史添加消息\"\"\"\n        self.conversation_history.append({\"role\": role, \"content\": content})\n    \n    def chat(self, user_input: str, max_tokens: int = 1000) -> str:\n        \"\"\"\n        与AGI代理进行对话\n        \n        Args:\n            user_input: 用户输入的消息\n            max_tokens: 生成响应的最大token数\n            \n        Returns:\n            代理的响应文本\n        \"\"\"\n        try:\n            # 添加用户消息到历史\n            self._add_message(\"user\", user_input)\n            \n            # 调用OpenAI API\n            response = self.client.chat.completions.create(\n                model=self.model,\n                messages=self.conversation_history,\n                max_tokens=max_tokens,\n                temperature=0.7,\n                top_p=0.95\n            )\n            \n            # 获取助手回复\n            assistant_response = response.choices[0].message.content\n            \n            # 添加助手回复到历史\n            self._add_message(\"assistant\", assistant_response)\n            \n            logger.info(f\"Processed user input: {user_input[:50]}...\")\n            return assistant_response\n            \n        except Exception as e:\n            error_msg = f\"Error in AGI agent chat: {str(e)}\"\n            logger.error(error_msg)\n            return f\"I encountered an error: {str(e)}. Please try again.\"\n    \n    def reset_conversation(self) -> None:\n        \"\"\"重置对话历史，保留系统提示\"\"\"\n        self.conversation_history = [{\"role\": \"system\", \"content\": self.system_prompt}]\n        logger.info(\"Conversation history reset\")\n    \n    def get_conversation_summary(self) -> str:\n        \"\"\"获取当前对话的简要摘要（不包括系统消息）\"\"\"\n        summary = []\n        for msg in self.conversation_history[1:]:  # 跳过系统消息\n            summary.append(f\"{msg['role'].upper()}: {msg['content']}\")\n        return \"\\n\".join(summary)"
        },
        {
            "filename": "agi/utils/config.py",
            "content": "import os\nfrom dataclasses import dataclass\nfrom typing import Optional\n\n@dataclass\nclass AGIConfig:\n    \"\"\"\n    AGI系统配置类\n    \"\"\"\n    # OpenAI相关配置\n    openai_api_key: Optional[str] = None\n    openai_model: str = \"gpt-4-turbo\"\n    \n    # 系统行为配置\n    system_prompt: Optional[str] = None\n    default_max_tokens: int = 1000\n    \n    # 日志配置\n    log_level: str = \"INFO\"\n    \n    @classmethod\n    def from_env(cls) -> \"AGIConfig\":\n        \"\"\"\n        从环境变量创建配置实例\n        \n        环境变量映射:\n        - OPENAI_API_KEY -> openai_api_key\n        - OPENAI_MODEL -> openai_model\n        - SYSTEM_PROMPT -> system_prompt\n        - DEFAULT_MAX_TOKENS -> default_max_tokens\n        - LOG_LEVEL -> log_level\n        \"\"\"\n        return cls(\n            openai_api_key=os.getenv(\"OPENAI_API_KEY\"),\n            openai_model=os.getenv(\"OPENAI_MODEL\", \"gpt-4-turbo\"),\n            system_prompt=os.getenv(\"SYSTEM_PROMPT\"),\n            default_max_tokens=int(os.getenv(\"DEFAULT_MAX_TOKENS\", \"1000\")),\n            log_level=os.getenv(\"LOG_LEVEL\", \"INFO\")\n        )"
        },
        {
            "filename": "agi/main.py",
            "content": "import logging\nimport sys\nfrom agi.core.agent import AGIAgent\nfrom agi.utils.config import AGIConfig\n\ndef setup_logging(log_level: str = \"INFO\"):\n    \"\"\"设置日志配置\"\"\"\n    numeric_level = getattr(logging, log_level.upper(), None)\n    if not isinstance(numeric_level, int):\n        raise ValueError(f\"Invalid log level: {log_level}\")\n    \n    logging.basicConfig(\n        level=numeric_level,\n        format=\"%(asctime)s - %(name)s - %(levelname)s - %(message)s\",\n        handlers=[\n            logging.StreamHandler(sys.stdout)\n        ]\n    )\n\ndef main():\n    \"\"\"\n    AGI主程序入口点\n    \n    用法:\n        python -m agi.main\n        \n    环境变量:\n        OPENAI_API_KEY: 必需，OpenAI API密钥\n        OPENAI_MODEL: 可选，默认为gpt-4-turbo\n        SYSTEM_PROMPT: 可选，自定义系统提示\n        LOG_LEVEL: 可选，默认为INFO\n    \"\"\"\n    # 加载配置\n    config = AGIConfig.from_env()\n    \n    # 设置日志\n    setup_logging(config.log_level)\n    logger = logging.getLogger(__name__)\n    \n    # 创建AGI代理\n    try:\n        agent = AGIAgent(\n            model=config.openai_model,\n            api_key=config.openai_api_key,\n            system_prompt=config.system_prompt\n        )\n        logger.info(f\"AGI agent initialized with model: {config.openai_model}\")\n    except ValueError as e:\n        logger.error(str(e))\n        print(\"Error: OPENAI_API_KEY environment variable is required\")\n        sys.exit(1)\n    \n    # 启动交互式对话循环\n    print(\"\\n=== AGI Assistant ===\")\n    print(\"Type 'quit' or 'exit' to end the conversation\")\n    print(\"Type 'reset' to clear conversation history\\n\")\n    \n    while True:\n        try:\n            user_input = input(\"You: \").strip()\n            \n            if user_input.lower() in [\"quit\", \"exit\"]:\n                print(\"Goodbye!\")\n                break\n            elif user_input.lower() == \"reset\":\n                agent.reset_conversation()\n                print(\"Conversation history has been reset.\\n\")\n                continue\n            elif not user_input:\n                continue\n                \n            response = agent.chat(user_input, max_tokens=config.default_max_tokens)\n            print(f\"AGI: {response}\\n\")\n            \n        except KeyboardInterrupt:\n            print(\"\\n\\nGoodbye!\")\n            break\n        except Exception as e:\n            logger.error(f\"Unexpected error: {e}\")\n            print(f\"An unexpected error occurred: {e}\")\n\nif __name__ == \"__main__\":\n    main()"
        },
        {
            "filename": "requirements.txt",
            "content": "openai>=1.12.0\npython-dotenv>=1.0.0"
        },
        {
            "filename": "README.md",
            "content": "# AGI Project\n\n实现一个真正意义上的AGI（人工通用智能）的基础框架，使用OpenAI API作为核心推理引擎。\n\n## 功能特性\n\n- 基于OpenAI最新模型的对话代理\n- 对话历史管理和上下文保持\n- 可配置的系统提示和行为准则\n- 环境变量驱动的配置管理\n- 交互式命令行界面\n- 错误处理和日志记录\n\n## 安装\n\n```bash\n# 克隆仓库\ngit clone <repository-url>\ncd agi\n\n# 创建虚拟环境（推荐）\npython -m venv venv\nsource venv/bin/activate  # Linux/MacOS\n# 或\nvenv\\Scripts\\activate  # Windows\n\n# 安装依赖\npip install -r requirements.txt\n```\n\n## 使用\n\n### 环境变量设置\n\n首先设置必要的环境变量：\n\n```bash\nexport OPENAI_API_KEY=\"your-openai-api-key\"\n# 可选配置\nexport OPENAI_MODEL=\"gpt-4-turbo\"  # 默认值\nexport SYSTEM_PROMPT=\"You are a helpful AGI assistant...\"\nexport LOG_LEVEL=\"INFO\"  # DEBUG, INFO, WARNING, ERROR\nexport DEFAULT_MAX_TOKENS=\"1000\"\n```\n\n### 运行交互式对话\n\n```bash\npython -m agi.main\n```\n\n在对话中：\n- 输入 `quit` 或 `exit` 退出程序\n- 输入 `reset` 清除对话历史\n\n### 编程接口\n\n```python\nfrom agi.core.agent import AGIAgent\n\n# 创建AGI代理\nagent = AGIAgent(\n    model=\"gpt-4-turbo\",\n    api_key=\"your-api-key\",\n    system_prompt=\"You are an AGI...\"\n)\n\n# 进行对话\nresponse = agent.chat(\"Hello, how are you?\")\nprint(response)\n\n# 重置对话\nagent.reset_conversation()\n```\n\n## 项目结构\n\n```\nagi/\n├── core/          # 核心AGI逻辑\n│   └── agent.py   # AGI代理实现\n├── utils/         # 工具函数\n│   └── config.py  # 配置管理\n├── main.py        # 主程序入口\n├── requirements.txt  # 依赖列表\n└── README.md      # 项目文档\n```\n\n## 注意事项\n\n1. **API密钥安全**：不要将API密钥硬编码在代码中，始终使用环境变量\n2. **成本控制**：GPT-4等高级模型调用成本较高，请注意监控使用量\n3. **真实AGI限制**：当前实现基于现有LLM技术，距离真正的AGI还有很大差距\n\n## 扩展方向\n\n- 添加工具调用能力（function calling）\n- 实现长期记忆存储\n- 集成多模态处理能力\n- 添加自我反思和改进机制\n- 实现多代理协作系统"
        },
        {
            "filename": ".env.example",
            "content": "# OpenAI API配置\nOPENAI_API_KEY=your_openai_api_key_here\nOPENAI_MODEL=gpt-4-turbo\n\n# 系统行为配置\nSYSTEM_PROMPT=You are an Artificial General Intelligence (AGI) assistant. Your goal is to reason step by step, learn from interactions, and provide helpful, truthful responses.\n\n# 日志和性能配置\nLOG_LEVEL=INFO\nDEFAULT_MAX_TOKENS=1000"
        }
    ]
}"