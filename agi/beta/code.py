# agi

```json
{
    "files": [
        {
            "filename": "requirements.txt",
            "content": "openai>=1.12.0\npython-dotenv>=1.0.0\nrequests>=2.31.0\ncolorama>=0.4.6\nrich>=13.7.0\npyyaml>=6.0\n"
        },
        {
            "filename": ".env.example",
            "content": "# OpenAI API Configuration\nOPENAI_API_KEY=your_api_key_here\n\n# AGI Configuration\nDEFAULT_MODEL=gpt-4-turbo-preview\nTEMPERATURE=0.7\nMAX_TOKENS=2000\n"
        },
        {
            "filename": "agi_core.py",
            "content": "\"\"\"\nAGIæ ¸å¿ƒæ¨¡å— - å®ç°é€šç”¨äººå·¥æ™ºèƒ½çš„åŸºç¡€æ¡†æ¶\n\"\"\"\n\nimport os\nimport json\nimport time\nfrom typing import Dict, List, Any, Optional\nfrom dataclasses import dataclass, asdict\nfrom enum import Enum\nfrom colorama import init, Fore, Style\nfrom dotenv import load_dotenv\nimport openai\n\n# åˆå§‹åŒ–é¢œè‰²è¾“å‡º\ninit(autoreset=True)\nload_dotenv()\n\nclass TaskStatus(Enum):\n    \"\"\"ä»»åŠ¡çŠ¶æ€æšä¸¾\"\"\"\n    PENDING = \"pending\"\n    RUNNING = \"running\"\n    COMPLETED = \"completed\"\n    FAILED = \"failed\"\n\nclass SkillLevel(Enum):\n    \"\"\"æŠ€èƒ½æ°´å¹³æšä¸¾\"\"\"\n    BASIC = \"basic\"\n    INTERMEDIATE = \"intermediate\"\n    ADVANCED = \"advanced\"\n    EXPERT = \"expert\"\n\n@dataclass\nclass Task:\n    \"\"\"ä»»åŠ¡æ•°æ®ç»“æ„\"\"\"\n    id: str\n    description: str\n    priority: int = 1\n    status: TaskStatus = TaskStatus.PENDING\n    result: Optional[str] = None\n    created_at: float = time.time()\n    updated_at: float = time.time()\n\n@dataclass\nclass MemoryEntry:\n    \"\"\"è®°å¿†æ¡ç›®\"\"\"\n    id: str\n    content: str\n    category: str\n    importance: int = 1\n    timestamp: float = time.time()\n\nclass AGICore:\n    \"\"\"AGIæ ¸å¿ƒç±»\"\"\"\n    \n    def __init__(self, name: str = \"AGI-Assistant\"):\n        \"\"\"åˆå§‹åŒ–AGIæ ¸å¿ƒ\"\"\"\n        self.name = name\n        self.client = self._init_openai_client()\n        self.model = os.getenv(\"DEFAULT_MODEL\", \"gpt-4-turbo-preview\")\n        self.temperature = float(os.getenv(\"TEMPERATURE\", 0.7))\n        self.max_tokens = int(os.getenv(\"MAX_TOKENS\", 2000))\n        \n        # æ ¸å¿ƒç»„ä»¶\n        self.memory: List[MemoryEntry] = []\n        self.tasks: List[Task] = []\n        self.skills: Dict[str, SkillLevel] = {\n            \"reasoning\": SkillLevel.INTERMEDIATE,\n            \"planning\": SkillLevel.BASIC,\n            \"learning\": SkillLevel.BASIC,\n            \"problem_solving\": SkillLevel.INTERMEDIATE,\n        }\n        \n        # ä¼šè¯å†å²\n        self.conversation_history: List[Dict[str, str]] = []\n        \n        self._print_banner()\n    \n    def _init_openai_client(self) -> openai.OpenAI:\n        \"\"\"åˆå§‹åŒ–OpenAIå®¢æˆ·ç«¯\"\"\"\n        api_key = os.getenv(\"OPENAI_API_KEY\")\n        if not api_key:\n            raise ValueError(\"è¯·è®¾ç½®OPENAI_API_KEYç¯å¢ƒå˜é‡\")\n        return openai.OpenAI(api_key=api_key)\n    \n    def _print_banner(self):\n        \"\"\"æ‰“å°å¯åŠ¨æ¨ªå¹…\"\"\"\n        banner = f\"\"\"\n{Fore.CYAN}{'='*60}\n{Fore.GREEN}âœ¨ {self.name} - é€šç”¨äººå·¥æ™ºèƒ½ç³»ç»Ÿ âœ¨\n{Fore.CYAN}{'='*60}\n{Fore.YELLOW}æ¨¡å‹: {self.model}\næŠ€èƒ½æ°´å¹³: {', '.join([f'{k}:{v.value}' for k, v in self.skills.items()])}\n{Fore.CYAN}{'='*60}{Style.RESET_ALL}\n\"\"\"\n        print(banner)\n    \n    def think(self, prompt: str, context: Optional[str] = None) -> str:\n        \"\"\"æ ¸å¿ƒæ€è€ƒè¿‡ç¨‹\"\"\"\n        try:\n            # æ„å»ºå®Œæ•´çš„æç¤ºè¯\n            full_prompt = self._build_thinking_prompt(prompt, context)\n            \n            # è°ƒç”¨OpenAI API\n            response = self.client.chat.completions.create(\n                model=self.model,\n                messages=[\n                    {\"role\": \"system\", \"content\": \"ä½ æ˜¯ä¸€ä¸ªé€šç”¨äººå·¥æ™ºèƒ½ç³»ç»Ÿï¼Œå…·æœ‰å¼ºå¤§çš„æ¨ç†ã€å­¦ä¹ å’Œé—®é¢˜è§£å†³èƒ½åŠ›ã€‚\"},\n                    {\"role\": \"user\", \"content\": full_prompt}\n                ],\n                temperature=self.temperature,\n                max_tokens=self.max_tokens\n            )\n            \n            result = response.choices[0].message.content\n            \n            # è®°å½•åˆ°è®°å¿†\n            self._add_to_memory(prompt, result, \"thinking\")\n            \n            return result\n            \n        except Exception as e:\n            error_msg = f\"æ€è€ƒè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯: {str(e)}\"\n            print(f\"{Fore.RED}{error_msg}{Style.RESET_ALL}\")\n            return error_msg\n    \n    def _build_thinking_prompt(self, prompt: str, context: Optional[str]) -> str:\n        \"\"\"æ„å»ºæ€è€ƒæç¤ºè¯\"\"\"\n        prompt_parts = []\n        \n        # æ·»åŠ æŠ€èƒ½ä¿¡æ¯\n        skills_desc = \", \".join([f\"{skill}:{level.value}\" for skill, level in self.skills.items()])\n        prompt_parts.append(f\"æˆ‘å½“å‰çš„æŠ€èƒ½æ°´å¹³: {skills_desc}\")\n        \n        # æ·»åŠ ä¸Šä¸‹æ–‡\n        if context:\n            prompt_parts.append(f\"ä¸Šä¸‹æ–‡ä¿¡æ¯: {context}\")\n        \n        # æ·»åŠ ä»»åŠ¡ä¿¡æ¯ï¼ˆå¦‚æœæœ‰æœªå®Œæˆçš„ä»»åŠ¡ï¼‰\n        pending_tasks = [t for t in self.tasks if t.status == TaskStatus.PENDING]\n        if pending_tasks:\n            task_list = \"\\n\".join([f\"- {t.description} (ä¼˜å…ˆçº§: {t.priority})\" for t in pending_tasks[:3]])\n            prompt_parts.append(f\"å¾…åŠä»»åŠ¡:\\n{task_list}\")\n        \n        # æ·»åŠ æ ¸å¿ƒé—®é¢˜\n        prompt_parts.append(f\"æ ¸å¿ƒé—®é¢˜æˆ–ä»»åŠ¡: {prompt}\")\n        \n        # æ·»åŠ æŒ‡ä»¤\n        prompt_parts.append(\"è¯·åŸºäºä»¥ä¸Šä¿¡æ¯è¿›è¡Œæ·±å…¥æ€è€ƒå’Œåˆ†æï¼Œæä¾›å…¨é¢ã€æœ‰æ¡ç†çš„è§£å†³æ–¹æ¡ˆæˆ–å›ç­”ã€‚\")\n        \n        return \"\\n\\n\".join(prompt_parts)\n    \n    def _add_to_memory(self, content: str, response: str, category: str):\n        \"\"\"æ·»åŠ è®°å¿†\"\"\"\n        memory_id = f\"memory_{len(self.memory)}_{int(time.time())}\"\n        entry = MemoryEntry(\n            id=memory_id,\n            content=f\"Q: {content}\\nA: {response}\",\n            category=category,\n            importance=2  # é»˜è®¤ä¸­ç­‰é‡è¦æ€§\n        )\n        self.memory.append(entry)\n        \n        # ä¿æŒè®°å¿†å¤§å°é™åˆ¶\n        if len(self.memory) > 100:\n            self.memory = sorted(self.memory, key=lambda x: x.importance, reverse=True)[:80]\n    \n    def create_task(self, description: str, priority: int = 1) -> str:\n        \"\"\"åˆ›å»ºæ–°ä»»åŠ¡\"\"\"\n        task_id = f\"task_{len(self.tasks)}_{int(time.time())}\"\n        task = Task(\n            id=task_id,\n            description=description,\n            priority=priority\n        )\n        self.tasks.append(task)\n        print(f\"{Fore.GREEN}âœ… ä»»åŠ¡åˆ›å»ºæˆåŠŸ: {description} (ID: {task_id}){Style.RESET_ALL}\")\n        return task_id\n    \n    def execute_task(self, task_id: str) -> Optional[str]:\n        \"\"\"æ‰§è¡Œä»»åŠ¡\"\"\"\n        task = next((t for t in self.tasks if t.id == task_id), None)\n        if not task:\n            print(f\"{Fore.RED}âŒ æ‰¾ä¸åˆ°ä»»åŠ¡: {task_id}{Style.RESET_ALL}\")\n            return None\n        \n        task.status = TaskStatus.RUNNING\n        task.updated_at = time.time()\n        \n        print(f\"{Fore.YELLOW}ğŸš€ å¼€å§‹æ‰§è¡Œä»»åŠ¡: {task.description}{Style.RESET_ALL}\")\n        \n        # ä½¿ç”¨æ€è€ƒè¿‡ç¨‹æ¥æ‰§è¡Œä»»åŠ¡\n        result = self.think(\n            prompt=f\"è¯·å®Œæˆä»¥ä¸‹ä»»åŠ¡: {task.description}\",\n            context=f\"è¿™æ˜¯ä¸€ä¸ªä¼˜å…ˆçº§ä¸º{task.priority}çš„ä»»åŠ¡ã€‚\"\n        )\n        \n        task.status = TaskStatus.COMPLETED\n        task.result = result\n        task.updated_at = time.time()\n        \n        print(f\"{Fore.GREEN}âœ… ä»»åŠ¡å®Œæˆ: {task.description}{Style.RESET_ALL}\")\n        return result\n    \n    def learn(self, topic: str, depth: str = \"intermediate\") -> str:\n        \"\"\"å­¦ä¹ æ–°çŸ¥è¯†\"\"\"\n        print(f\"{Fore.BLUE}ğŸ“š å¼€å§‹å­¦ä¹ : {topic} (æ·±åº¦: {depth}){Style.RESET_ALL}\")\n        \n        prompt = f\"è¯·ç³»ç»Ÿæ€§åœ°æ•™æˆæˆ‘å…³äº'{topic}'çš„çŸ¥è¯†ï¼Œå­¦ä¹ æ·±åº¦ä¸º'{depth}'ã€‚\"\n        result = self.think(prompt)\n        \n        # æé«˜å­¦ä¹ æŠ€èƒ½\n        if self.skills[\"learning\"].value != SkillLevel.EXPERT.value:\n            current = self.skills[\"learning\"]\n            levels = list(SkillLevel)\n            current_index = levels.index(current)\n            if current_index < len(levels) - 1:\n                self.skills[\"learning\"] = levels[current_index + 1]\n        \n        self._add_to_memory(f\"å­¦ä¹ {topic}\", result, \"learning\")\n        \n        return result\n    \n    def plan(self, goal: str, steps: int = 5) -> Dict[str, Any]:\n        \"\"\"åˆ¶å®šè®¡åˆ’\"\"\"\n        print(f\"{Fore.MAGENTA}ğŸ“‹ åˆ¶å®šè®¡åˆ’: {goal}{Style.RESET_ALL}\")\n        \n        prompt = f\"ä¸ºç›®æ ‡'{goal}'åˆ¶å®šä¸€ä¸ªè¯¦ç»†çš„{steps}æ­¥è®¡åˆ’ã€‚\"\n        result = self.think(prompt)\n        \n        # è§£æè®¡åˆ’æ­¥éª¤\n        plan_steps = []\n        lines = result.split('\\n')\n        for line in lines:\n            line = line.strip()\n            if line and (line[0].isdigit() or line.startswith('-')):\n                step = line.lstrip('0123456789.- ')\n                if step:\n                    plan_steps.append(step)\n        \n        plan = {\n            \"goal\": goal,\n            \"steps\": plan_steps,\n            \"total_steps\": len(plan_steps),\n            \"generated_at\": time.time()\n        }\n        \n        # ä¸ºæ¯ä¸ªæ­¥éª¤åˆ›å»ºä»»åŠ¡\n        for i, step in enumerate(plan_steps, 1):\n            self.create_task(\n                description=f\"è®¡åˆ’æ­¥éª¤{i}: {step}\",\n                priority=max(1, 10 - i)  # å‰é¢çš„æ­¥éª¤ä¼˜å…ˆçº§æ›´é«˜\n            )\n        \n        self._add_to_memory(f\"è®¡åˆ’:{goal}\", result, \"planning\")\n        \n        return plan\n    \n    def get_status(self) -> Dict[str, Any]:\n        \"\"\"è·å–ç³»ç»ŸçŠ¶æ€\"\"\"\n        return {\n            \"name\": self.name,\n            \"model\": self.model,\n            \"memory_entries\": len(self.memory),\n            \"total_tasks\": len(self.tasks),\n            \"pending_tasks\": len([t for t in self.tasks if t.status == TaskStatus.PENDING]),\n            \"skills\": {k: v.value for k, v in self.skills.items()},\n            \"conversation_history_length\": len(self.conversation_history)\n        }\n    \n    def interactive_mode(self):\n        \"\"\"äº¤äº’å¼æ¨¡å¼\"\"\"\n        print(f\"{Fore.CYAN}\\nğŸ’¬ è¿›å…¥äº¤äº’æ¨¡å¼ï¼Œè¾“å…¥'exit'é€€å‡ºï¼Œ'status'æŸ¥çœ‹çŠ¶æ€ï¼Œ'help'æŸ¥çœ‹å¸®åŠ©{Style.RESET_ALL}\")\n        \n        while True:\n            try:\n                user_input = input(f\"{Fore.GREEN}>> {Style.RESET_ALL}\").strip()\n                \n                if user_input.lower() == 'exit':\n                    print(f\"{Fore.YELLOW}ğŸ‘‹ å†è§ï¼{Style.RESET_ALL}\")\n                    break\n                elif user_input.lower() == 'status':\n                    status = self.get_status()\n                    print(f\"{Fore.CYAN}{'='*40}\")\n                    for key, value in status.items():\n                        print(f\"{key}: {value}\")\n                    print(f\"{'='*40}{Style.RESET_ALL}\")\n                elif user_input.lower() == 'help':\n                    self._show_help()\n                elif user_input.startswith('task '):\n                    parts = user_input.split(' ', 1)\n                    if len(parts) > 1:\n                        task_id = self.create_task(parts[1])\n                        self.execute_task(task_id)\n                elif user_input.startswith('learn '):\n                    parts = user_input.split(' ', 1)\n                    if len(parts) > 1:\n                        result = self.learn(parts[1])\n                        print(f\"{Fore.BLUE}{result}{Style.RESET_ALL}\")\n                elif user_input.startswith('plan '):\n                    parts = user_input.split(' ', 1)\n                    if len(parts) > 1:\n                        plan = self.plan(parts[1])\n                        print(f\"{Fore.MAGENTA}è®¡åˆ’ç”Ÿæˆå®Œæˆï¼Œå…±{plan['total_steps']}ä¸ªæ­¥éª¤:{Style.RESET_ALL}\")\n                        for i, step in enumerate(plan['steps'], 1):\n                            print(f\"  {i}. {step}\")\n                else:\n                    response = self.think(user_input)\n                    print(f\"{Fore.BLUE}{response}{Style.RESET_ALL}\")\n                    \n            except KeyboardInterrupt:\n                print(f\"\\n{Fore.YELLOW}ğŸ‘‹ å†è§ï¼{Style.RESET_ALL}\")\n                break\n            except Exception as e:\n                print(f\"{Fore.RED}é”™è¯¯: {str(e)}{Style.RESET_ALL}\")\n    \n    def _show_help(self):\n        \"\"\"æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯\"\"\"\n        help_text = \"\"\"\nå¯ç”¨å‘½ä»¤:\n  <ä»»æ„é—®é¢˜>      - æé—®æˆ–è¯·æ±‚åˆ†æ\n  task <æè¿°>     - åˆ›å»ºå¹¶æ‰§è¡Œä»»åŠ¡\n  learn <ä¸»é¢˜>    - å­¦ä¹ æ–°çŸ¥è¯†\n  plan <ç›®æ ‡>     - åˆ¶å®šè®¡åˆ’\n  status         - æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€\n  exit           - é€€å‡ºäº¤äº’æ¨¡å¼\n  help           - æ˜¾ç¤ºæ­¤å¸®åŠ©\n        \"\"\"\n        print(f\"{Fore.CYAN}{help_text}{Style.RESET_ALL}\")\n\n\ndef